<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Advanced Intuition Training ‚Äî HTML (EN)</title>
  <!-- Tailwind CDN to preserve original appearance -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.border-3{border-width:3px}</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-gray-200">
  <!-- Progress bar -->
  <div id="progress" class="hidden fixed top-0 left-0 right-0 h-2 bg-gray-900 z-50 flex">
    <div id="pRed" class="bg-red-600 transition-all duration-700" style="width:100%"></div>
    <div id="pGreen" class="bg-green-600 transition-all duration-700" style="width:0%"></div>
  </div>

  <!-- Breathing indicator -->
  <div id="breathing" class="hidden fixed left-4 top-16 items-center gap-3 bg-gray-800/60 px-4 py-3 rounded-lg border border-gray-700">
    <svg id="breathIcon" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 8h4l2 6 2-6h4"/><path d="M5 16h14"/></svg>
    <div>
      <p id="breathText" class="text-gray-400 text-xs"></p>
      <div class="w-16 h-1 bg-gray-700 rounded-full mt-1">
        <div id="breathBar" class="h-full bg-gray-400" style="width:0%"></div>
      </div>
    </div>
  </div>

  <!-- App container -->
  <main id="app" class="flex items-center justify-center p-4 min-h-screen"></main>

  <script>
    /***********************
     * Data from your TSX  *
     ***********************/
    const profiles = [
      { id:'shapes',   name:'Shapes & Forms',     desc:'Focus on geometric patterns' },
      { id:'colors',   name:'Colors & Tones',     desc:'Sense color vibrations' },
      { id:'numbers',  name:'Numbers & Symbols',  desc:'Perceive numerical patterns' },
      { id:'emotions', name:'Feelings & Emotions',desc:'Connect with emotional energy' },
      { id:'locations',name:'Places & Spaces',    desc:'Visualize environments' }
    ];
    const levels = {
      1:{ name:'Beginner', targets:5, choices:2 },
      2:{ name:'Novice', targets:5, choices:3 },
      3:{ name:'Learner', targets:6, choices:4 },
      4:{ name:'Student', targets:6, choices:5 },
      5:{ name:'Practitioner', targets:7, choices:6 },
      6:{ name:'Skilled', targets:7, choices:7 },
      7:{ name:'Advanced', targets:8, choices:8 },
      8:{ name:'Expert', targets:8, choices:9 },
      9:{ name:'Master', targets:9, choices:10 },
      10:{ name:'Grandmaster', targets:10, choices:11 }
    };
    const targetsByProfile = {
      shapes:['circle','triangle','square','rectangle','star','diamond','oval','cross','pentagon','hexagon','octagon','spiral','wave','zigzag','arrow','heart','crescent','pyramid','cube','sphere','cylinder','cone','torus','ellipse','trapezoid','rhombus','parallelogram','kite','arc','helix','double helix','lotus','fan','wedge','ribbon','infinity','droplet','leaf','petal','crown'],
      colors:['red','blue','green','yellow','purple','orange','pink','white','cyan','magenta','indigo','violet','crimson','azure','emerald','gold','silver','bronze','turquoise','coral','lavender','maroon','navy','olive','teal','lime','amber','ruby','sapphire','jade','pearl','ivory','charcoal','slate','burgundy','plum','mint','peach','cream','ebony'],
      numbers:['1','2','3','4','5','6','7','8','9','0','11','22','33','44','55','66','77','88','99','100','111','222','333','444','555','666','777','888','999','1000','12','13','17','21','27','36','42','108','144','369'],
      emotions:['joy','calm','peace','love','hope','courage','clarity','harmony','serenity','gratitude','wonder','excitement','curiosity','confidence','compassion','trust','contentment','bliss','awe','delight','euphoria','tranquility','ecstasy','empathy','kindness','patience','wisdom','grace','devotion','passion','tenderness','acceptance','forgiveness','reverence','inspiration','fulfillment','freedom','balance','radiance','vitality'],
      locations:['beach','mountain','forest','desert','city','lake','valley','island','river','canyon','temple','bridge','waterfall','meadow','volcano','glacier','oasis','cave','garden','field','ocean','jungle','plateau','cliff','dune','marsh','fjord','bay','lagoon','reef','tundra','savanna','prairie','grove','delta','gorge','peninsula','archipelago','monastery','lighthouse']
    };
    // ‚Üë Sourced from your EN TSX; the visual hint sizes there are larger, herest size to fit HTML. [1](https://hp-my.sharepoint.com/personal/emil_mihov_hp_com).tsx)

    /***************
     * App state   *
     ***************/
    const S = {
      stage:'modeSelect',          // modeSelect, profiles, levelSelect, relaxation, practice, feedback
      mode:'normal',               // normal | hypermode
      profile:null,
      level:1,
      target:null,
      choices:[],
      score:0,
      attempts:0,
      usedTargets:[],
      relaxationTimer:10,
      // breathing
      breathPhase:'inhale',
      breathTimer:0,
      // practice
      showHint:false,
      hintUsed:false,
      selectedChoice:null,
      typedAnswer:'',
      feedback:null
    };

    const $ = s=>document.querySelector(s);
    const app = $('#app');
    const progress = $('#progress'), pRed = $('#pRed'), pGreen = $('#pGreen');
    const breathing = $('#breathing'), breathIcon=$('#breathIcon'), breathText=$('#breathText'), breathBar=$('#breathBar');

    /****************
     * Helpers      *
     ****************/
    const shuffle = arr => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
    function updateProgress(){
      const pct = S.attempts ? (S.score / S.attempts)*100 : 0;
      if(S.stage==='practice' || S.stage==='feedback'){
        progress.classList.remove('hidden');
        pRed.style.width = (100-pct)+'%';
        pGreen.style.width = pct+'%';
      } else {
        progress.classList.add('hidden');
      }
    }

    /**********************
     * Breathing / relax  *
     **********************/
    let breathInterval=null, relaxInterval=null;
    function startBreathing(){
      breathing.classList.remove('hidden');
      stopBreathing();
      S.breathPhase='inhale'; S.breathTimer=0;
      let last = performance.now();
      breathInterval = setInterval(()=>{
        const now=performance.now();
        const elapsed=(now-last)/1000;
        S.breathTimer = Math.min(4, elapsed);
        breathBar.style.width = (S.breathTimer/4*100)+'%';
        const phaseText = S.breathPhase==='inhale'?'Breathe In':S.breathPhase==='exhale'?'Breathe Out':'Hold';
        breathText.textContent = phaseText;
        let scale=1.15;
        if(S.breathPhase==='inhale') scale = 1 + (S.breathTimer/4)*0.3;
        else if(S.breathPhase==='exhale') scale = 1.3 - (S.breathTimer/4)*0.3;
        breathIcon.style.transform = `scale(${scale.toFixed(3)})`;
        if(elapsed>=4){
          last=now;
          if(S.breathPhase==='inhale') S.breathPhase='hold1';
          else if(S.breathPhase==='hold1') S.breathPhase='exhale';
          else if(S.breathPhase==='exhale') S.breathPhase='hold2';
          else if(S.breathPhase==='hold2') S.breathPhase='inhale';
          S.breathTimer=0;
        }
      },100);

      if(relaxInterval) clearInterval(relaxInterval);
      relaxInterval = setInterval(()=>{
        if(S.relaxationTimer>0){ S.relaxationTimer--; render(); }
        else { clearInterval(relaxInterval); startPractice(); }
      },1000);
    }
    function stopBreathing(){
      if(breathInterval) clearInterval(breathInterval);
      if(relaxInterval) clearInterval(relaxInterval);
      breathing.classList.add('hidden');
    }

    /**********************
     * Hint visualization *
     **********************/
    function getHintVisualization(tgt, profileId){
      if(profileId==='shapes'){
        if(tgt==='circle')   return '<div class="w-14 h-14 rounded-full border-3 border-white/20"></div>';
        if(tgt==='square')   return '<div class="w-14 h-14 border-3 border-white/20"></div>';
        if(tgt==='triangle') return '<div class="w-0 h-0 border-l-[28px] border-r-[28px] border-b-[48px] border-l-transparent border-r-transparent border-b-white/20"></div>';
        if(tgt==='star')     return '<div class="text-4xl text-white/20">‚òÖ</div>';
        return '<div class="w-14 h-14 rounded-full border-3 border-white/20"></div>';
      }
      if(profileId==='colors'){
        const colors = { red:'#ff4444', blue:'#4444ff', green:'#44ff44', yellow:'#ffff44', purple:'#aa44aa', orange:'#ffaa44', pink:'#ffaacc', white:'#ffffff' };
        const color = colors[tgt] || '#ffffff';
        return `<div class="w-12 h-12 rounded-full" style="background:${color};opacity:.25"></div>`;
      }
      if(profileId==='numbers'){
        const num = parseInt(tgt) || 0;
        const dots = Array.from({length: Math.max(num>12?Math.floor(num/10):num,0)}).map(()=>'<div class="w-2 h-2 rounded-full bg-white/25"></div>').join('');
        return `<div class="flex flex-wrap gap-1 justify-center w-16 h-16 items-center">${dots}</div>`;
      }
      return '<div class="w-12 h-12 rounded-full bg-white/10"></div>';
    }

    /**********************
     * Stage navigation   *
     **********************/
    function selectMode(m){ S.mode=m; S.stage='profiles'; render(); }
    function selectProfile(prof){ S.profile=prof; S.stage='levelSelect'; render(); }
    function selectLevel(lvl){ S.level=lvl; S.stage='relaxation'; S.relaxationTimer=10; startBreathing(); render(); }

    function startPractice(){
      stopBreathing();
      const targets = targetsByProfile[S.profile.id];
      const numChoices = levels[S.level].choices;
      const available = targets.filter(t=> !S.usedTargets.includes(t));
      const pool = (available.length >= numChoices) ? available : targets;
      const randomTarget = pool[Math.floor(Math.random()*pool.length)];
      S.usedTargets = [...S.usedTargets.slice(-7), randomTarget];
      S.target = randomTarget;
      S.showHint=false; S.hintUsed=false;

      if(S.mode==='hypermode'){
        S.choices=[];
      } else {
        const others = pool.filter(t=>t!==randomTarget);
        const wrong = shuffle(others).slice(0, numChoices-1);
        S.choices = shuffle([randomTarget, ...wrong]);
      }
      S.stage='practice'; render();
    }

    function submitGuess(choice){
      S.selectedChoice = choice;
      S.attempts += 1;
      const isCorrect = (choice===S.target) || (String(choice).toLowerCase().trim()===String(S.target).toLowerCase().trim());
      if(isCorrect && !S.hintUsed){
        S.score += 1;
        S.feedback = { correct:true, message:'Perfect! Your intuition is strong.' };
      } else if(isCorrect && S.hintUsed){
        S.score += 0.5;
        S.feedback = { correct:true, message:'Correct! (Hint used - half points)' };
      } else {
        S.feedback = { correct:false, message:`The target was: ${S.target}. Keep practicing!` };
      }
      S.stage='feedback'; S.typedAnswer=''; render();
    }

    function nextRound(){
      const L = levels[S.level];
      if(S.attempts >= L.targets){
        const accuracy = S.attempts ? (S.score/S.attempts)*100 : 0;
        const required = 100 / L.choices * 1.5;
        if(accuracy >= required && S.level < 10){
          S.level += 1; S.score=0; S.attempts=0;
        }
        S.stage='relaxation'; S.relaxationTimer=10; startBreathing(); render();
      } else {
        startPractice();
      }
    }

    function resetGame(){
      Object.assign(S, {
        stage:'modeSelect', mode:'normal', profile:null, level:1, target:null, choices:[],
        score:0, attempts:0, usedTargets:[], relaxationTimer:10, breathPhase:'inhale', breathTimer:0,
        showHint:false, hintUsed:false, selectedChoice:null, typedAnswer:'', feedback:null
      });
      stopBreathing(); render();
    }

    function copyResults(){
      const acc = S.attempts ? Math.round((S.score/S.attempts)*100) : 0;
      const text = `AIT Results - ${new Date().toLocaleString()}
Mode: ${S.mode}
Profile: ${S.profile.name}
Level: ${S.level}
Score: ${S.score}/${S.attempts} (${acc}%)`;
      navigator.clipboard.writeText(text).then(()=> alert('Results copied!'));
    }

    /**********
     * Views  *
     **********/
    function viewModeSelect(){
      app.innerHTML = `
        <div class="max-w-2xl w-full">
          <div class="text-center mb-12">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-20 h-20 mx-auto mb-6 text-gray-400 animate-pulse" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
            <h1 class="text-5xl font-light text-gray-200 mb-3">Advanced Intuition Training</h1>
            <p class="text-gray-500 text-sm mb-2">Based on Remote Viewing protocols from CIA Stargate Project</p>
            <p class="text-gray-400 text-lg">Select Your Training Mode</p>
          </div>
          <div class="space-y-4">
            <button id="mNormal" class="w-full bg-gray-700/50 hover:bg-gray-600/50 border border-gray-600 rounded-lg p-6 transition-all duration-500 group">
              <div class="flex items-center justify-between">
                <div class="text-left">
                  <h3 class="text-xl font-medium text-gray-200 mb-1">Normal Mode</h3>
                  <p class="text-gray-400 text-sm">Standard intuition training with progressive levels</p>
                </div>
                <span class="w-6 h-6 text-gray-500 group-hover:text-gray-300">‚Ä∫</span>
              </div>
            </button>
            <button id="mHyper" class="w-full bg-gradient-to-r from-purple-900/30 to-indigo-900/30 border border-purple-700 rounded-lg p-6 transition-all duration-500 group">
              <div class="flex items-center justify-between">
                <div class="text-left">
                  <div class="flex items-center gap-2 mb-1">
                    <h3 class="text-xl font-medium text-purple-300">Hypermode</h3>
                    <span class="text-purple-400">‚ö°</span>
                  </div>
                  <p class="text-gray-400 text-sm">Advanced training for real remote viewers</p>
                </div>
                <span class="w-6 h-6 text-purple-500">‚Ä∫</span>
              </div>
            </button>
          </div>
        </div>`;
      $('#mNormal').onclick = ()=> selectMode('normal');
      $('#mHyper').onclick  = ()=> selectMode('hypermode');
    }

    function viewProfiles(){
      app.innerHTML = `
        <div class="max-w-2xl w-full">
          <div class="text-center mb-12">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-20 h-20 mx-auto mb-6 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2v20M2 12h20"/></svg>
            <h1 class="text-5xl font-light text-gray-200 mb-3">Choose Your Focus</h1>
            <p class="text-gray-400 text-lg">Select a perception profile</p>
          </div>
          <div id="pList" class="space-y-4"></div>
          <button id="back" class="w-full mt-6 bg-gray-700/30 text-gray-400 py-3 rounded-lg">‚Üê Back</button>
        </div>`;
      const pList = $('#pList');
      pList.innerHTML = profiles.map(p=>`
        <button class="w-full bg-gray-700/50 hover:bg-gray-600/50 border border-gray-600 rounded-lg p-6 transition-all duration-500 group">
          <div class="flex items-center justify-between">
            <div class="text-left">
              <h3 class="text-xl font-medium text-gray-200 mb-1">${p.name}</h3>
              <p class="text-gray-400 text-sm">${p.desc}</p>
            </div>
            <span class="w-6 h-6 text-gray-500 group-hover:text-gray-300">‚Ä∫</span>
          </div>
        </button>`).join('');
      [...pList.children].forEach((btn,i)=> btn.onclick = ()=> selectProfile(profiles[i]));
      $('#back').onclick = ()=> { S.stage='modeSelect'; render(); };
    }

    function viewLevelSelect(){
      app.innerHTML = `
        <div class="max-w-3xl w-full">
          <div class="text-center mb-8">
            <h2 class="text-3xl font-light text-gray-200 mb-2">Select Your Level</h2>
            <p class="text-gray-400">${S.profile.name}</p>
          </div>
          <div id="levels" class="grid grid-cols-2 sm:grid-cols-5 gap-3 mb-6"></div>
          <button id="back" class="w-full bg-gray-700/50 text-gray-300 py-3 rounded-lg">‚Üê Back</button>
        </div>`;
      const holder = $('#levels');
      holder.innerHTML = Object.keys(levels).map(lvl=>{
        const L = levels[lvl];
        return `
        <button data-l="${lvl}" class="bg-gray-700/50 hover:bg-gray-600/50 border border-gray-600 rounded-lg p-4">
          <p class="text-2xl font-light text-gray-300 mb-1">${lvl}</p>
          <p class="text-xs text-gray-400 mb-2">${L.name}</p>
          <p class="text-xs text-gray-500">${L.choices} choices</p>
        </button>`;
      }).join('');
      holder.querySelectorAll('button').forEach(b=> b.onclick = ()=> selectLevel(parseInt(b.dataset.l,10)));
      $('#back').onclick = ()=> { S.stage='profiles'; render(); }
    }

    function viewRelaxation(){
      app.innerHTML = `
        <div class="max-w-md w-full text-center">
          <div class="w-32 h-32 mx-auto mb-6 rounded-full bg-gray-700/30 border-4 border-gray-600 flex items-center justify-center">
            <span class="text-6xl font-light text-gray-300">${S.relaxationTimer}</span>
          </div>
          <h2 class="text-3xl font-light text-gray-200 mb-4">Prepare Your Mind</h2>
          <p class="text-gray-400">Close your eyes. Follow your breath. Clear your thoughts. Let your intuition awaken.</p>
        </div>`;
    }

    function viewPractice(){
      updateProgress();
      const L = levels[S.level];
      const modeText = (S.mode==='hypermode') ? 'HYPERMODE' : `Level ${S.level}: ${L.name}`;
      const roundText = `${S.attempts + 1} / ${L.targets}`;
      let content='';
      if(S.mode==='hypermode'){
        content = `
          <div class="bg-gray-700/30 rounded-lg p-8 border border-gray-600 mb-8 relative overflow-hidden">
            <div class="text-center relative z-20">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 mx-auto mb-4 text-purple-500 animate-pulse" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
              <p class="text-purple-300 text-xl mb-2">What do you perceive?</p>
              <p class="text-gray-500 text-sm mb-4">Trust only your remote viewing abilities...</p>
              <p class="text-purple-400 text-xs">Type your answer below</p>
            </div>
          </div>
          <input id="typed" type="text" placeholder="Type what you sense..." class="w-full bg-gray-700/50 border border-purple-700/50 rounded-lg px-6 py-4 text-gray-200 placeholder-gray-500 focus:outline-none focus:border-purple-600 mb-4 text-center text-xl" autofocus/>
          <button id="submit" class="w-full bg-purple-900/50 hover:bg-purple-800/50 text-purple-300 font-medium py-4 rounded-lg transition-all duration-300 disabled:cursor-not-allowed">Submit Perception</button>
        `;
      } else {
        const gridCols = L.choices<=3? 'grid-cols-1' : (L.choices<=6? 'grid-cols-2' : 'grid-cols-3');
        content = `
          <div class="bg-gray-700/30 rounded-lg p-8 border border-gray-600 mb-8 relative overflow-hidden">
            ${S.showHint ? `
              <div class="absolute inset-0 flex items-center justify-center z-10">
                <div class="opacity-40">${getHintVisualization(S.target, S.profile.id)}</div>
              </div>` : ''
            }
            <div class="text-center relative z-20">
              <svg class="w-16 h-16 mx-auto mb-4 text-gray-500 animate-pulse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
              <p class="text-gray-300 text-xl mb-2">Which one do you sense?</p>
              <p class="text-gray-500 text-sm mb-4">Trust your first instinct...</p>
              <button id="hint" class="bg-gray-800/40 text-gray-600 px-4 py-2 rounded-lg text-xs border border-gray-700/50">
                ${S.showHint ? 'clear' : 'help'}
              </button>
            </div>
          </div>
          <div class="grid ${gridCols} gap-3 mb-6">
            ${S.choices.map((c,i)=>`
              <button data-choice="${c}" class="bg-gray-700/50 hover:bg-gray-600/70 border border-gray-600 rounded-lg p-6 transform hover:scale-105">
                <p class="text-gray-200 text-lg">${c}</p>
              </button>`).join('')}
          </div>`;
      }

      app.innerHTML = `
        <div class="max-w-2xl w-full">
          <div class="flex justify-between items-center mb-6">
            <div class="text-gray-400 text-sm">${modeText}</div>
            <div class="text-gray-400 text-sm">${roundText}</div>
          </div>
          ${content}
          <div class="bg-gray-700/30 rounded-lg p-4 border border-gray-600">
            <div class="flex justify-between text-sm">
              <span class="text-gray-400">Accuracy</span>
              <span class="text-gray-300">${S.attempts ? Math.round((S.score/S.attempts)*100) : 0}%</span>
            </div>
          </div>
        </div>`;

      if(S.mode==='hypermode'){
        const input = $('#typed'); const btn = $('#submit');
        const enable = ()=> btn.disabled = !input.value.trim();
        input.addEventListener('input', enable);
        input.addEventListener('keypress', e=>{ if(e.key==='Enter' && input.value.trim()) submitGuess(input.value.trim()); });
        btn.onclick = ()=> submitGuess(input.value.trim());
        enable();
      } else {
        $('#hint').onclick = ()=>{ S.showHint = !S.showHint; if(S.showHint) S.hintUsed = true; render(); };
        document.querySelectorAll('[data-choice]').forEach(b=> b.onclick = ()=> submitGuess(b.dataset.choice));
      }
    }

    function viewFeedback(){
      updateProgress();
      const L = levels[S.level];
      const isEnd = S.attempts >= L.targets;
      const okIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 6L9 17l-5-5"/></svg>`;
      const noIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>`;
      app.innerHTML = `
        <div class="max-w-md w-full text-center">
          <div class="w-32 h-32 mx-auto mb-6 rounded-full flex items-center justify-center ${S.feedback.correct ? 'bg-green-900/30 border-4 border-green-700' : 'bg-red-900/30 border-4 border-red-700'}">
            ${S.feedback.correct ? okIcon : noIcon}
          </div>
          <h2 class="text-3xl font-light mb-4 ${S.feedback.correct ? 'text-green-400' : 'text-red-400'}">
            ${S.feedback.correct ? 'Correct!' : 'Not quite'}
          </h2>
          <p class="text-gray-300 mb-2 text-lg">${S.feedback.message}</p>
          ${!S.feedback.correct ? `<p class="text-gray-500 text-sm mb-8">You chose: ${S.selectedChoice}</p>` : ''}

          <div class="bg-gray-700/30 rounded-lg p-6 border border-gray-600 mb-8">
            <div class="grid grid-cols-2 gap-4 text-center">
              <div>
                <p class="text-gray-400 text-sm mb-1">Score</p>
                <p class="text-gray-200 text-2xl font-light">${S.score}/${S.attempts}</p>
              </div>
              <div>
                <p class="text-gray-400 text-sm mb-1">Accuracy</p>
                <p class="text-gray-200 text-2xl font-light">${Math.round((S.score/S.attempts)*100)}%</p>
              </div>
            </div>
          </div>

          ${isEnd ? `
            <div class="space-y-3">
              <button id="copy" class="w-full bg-blue-900/30 border border-blue-800 text-blue-300 py-3 rounded-lg">üìã Copy Results</button>
              <button id="next" class="w-full bg-gray-600 text-gray-200 py-3 rounded-lg">Continue Training</button>
              <button id="reset" class="w-full bg-gray-700/50 text-gray-300 py-3 rounded-lg">‚ü≤ Start Over</button>
            </div>
          ` : `
            <button id="next" class="w-full bg-gray-600 text-gray-200 py-3 rounded-lg">Next Target</button>
          `}
        </div>`;
      $('#copy') && ($('#copy').onclick = copyResults);
      $('#next').onclick = nextRound;
      $('#reset') && ($('#reset').onclick = resetGame);
    }

    function render(){
      updateProgress();
      if(S.stage==='modeSelect')      viewModeSelect();
      else if(S.stage==='profiles')   viewProfiles();
      else if(S.stage==='levelSelect')viewLevelSelect();
      else if(S.stage==='relaxation') viewRelaxation();
      else if(S.stage==='practice')   viewPractice();
      else if(S.stage==='feedback')   viewFeedback();
    }

    // Start
    render();
  </script>
</body>
</html>
